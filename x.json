{
  "name": "canvas",
  "description": "Canvas for ChiÏ‡",
  "version": "0.0.2",
  "repository": {
    "type": "git",
    "url": "https://github.com/nodule/canvas.git"
  },
  "dependencies": {},
  "nodes": [
    {
      "name": "beginPath",
      "ns": "canvas",
      "async": true,
      "title": "Begin Path",
      "description": "Begin path",
      "phrases": {
        "active": "Beginning path"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "async": true,
            "type": "CanvasRenderingContext2D",
            "required": true
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          }
        }
      },
      "fn": "on.input.context = function() {\n  $.context.beginPath();\n  output({ context: $.get('context') });\n};\n"
    },
    {
      "name": "clearRect",
      "ns": "canvas",
      "async": true,
      "title": "Clear Rectangle",
      "description": "Sets all pixels in the rectangle defined by starting point (x, y) and size (width, height) to transparent black.",
      "phrases": {
        "active": "Clearing rectangle"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "async": true,
            "type": "CanvasRenderingContext2D",
            "required": true
          },
          "x": {
            "title": "X",
            "type": "number",
            "description": "The x axis of the coordinate for the rectangle starting point."
          },
          "y": {
            "title": "Y",
            "type": "number",
            "description": "The y axis of the coordinate for the rectangle starting point."
          },
          "width": {
            "title": "Width",
            "type": "number",
            "description": "The rectangle's width."
          },
          "height": {
            "title": "Height",
            "type": "number",
            "description": "The rectangle's height."
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          }
        }
      },
      "fn": "on.input.context = function() {\n  $.context.clearRect($.x, $.y, $.width, $.height);\n  output({ context: $.get('context') });\n};\n"
    },
    {
      "name": "clip",
      "ns": "canvas",
      "async": true,
      "title": "Clip",
      "description": "Clip",
      "phrases": {
        "active": "Clipping"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "async": true,
            "type": "CanvasRenderingContext2D",
            "required": true
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          }
        }
      },
      "fn": "on.input.context = function() {\n  $.context.clip();\n  output({ context: $.get('context') });\n};\n"
    },
    {
      "name": "closePath",
      "ns": "canvas",
      "async": true,
      "title": "Close Path",
      "description": "Close path",
      "phrases": {
        "active": "Closing path"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "async": true,
            "type": "CanvasRenderingContext2D",
            "required": true
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          }
        }
      },
      "fn": "on.input.context = function() {\n  $.context.closePath();\n  output({ context: $.get('context') });\n};\n"
    },
    {
      "name": "commit",
      "ns": "canvas",
      "async": true,
      "title": "Commit",
      "description": "Commit Context",
      "phrases": {
        "active": "Committing context"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "async": true,
            "type": "CanvasRenderingContext2D",
            "required": true
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          }
        }
      },
      "fn": "on.input.context = function() {\n  $.context.commit();\n  output({ context: $.get('context') });\n};\n"
    },
    {
      "name": "createImageData",
      "ns": "canvas",
      "async": true,
      "title": "Create Image Data",
      "description": "Creates a new, blank ImageData object with the specified dimensions. All of the pixels in the new object are transparent black",
      "phrases": {
        "active": "Creating image data"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D",
            "required": true
          },
          "image": {
            "title": "imagedata",
            "type": "ImageData"
          },
          "in": {
            "title": "Dimensions",
            "async": true,
            "type": "object",
            "items": {
              "width": {
                "type": "number",
                "title": "Width"
              },
              "height": {
                "type": "number",
                "title": "Height"
              }
            }
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          },
          "out": {
            "title": "Point",
            "type": "array"
          }
        }
      },
      "fn": "on.input.in = function() {\n  $.context.createImageData($.width, $.height);\n  output({\n    context: $.get('context'),\n    out: $.get('in')\n  });\n};\n"
    },
    {
      "name": "createPattern",
      "ns": "canvas",
      "async": true,
      "title": "Create Pattern",
      "description": "A DOM element to use as the source image for the pattern. This can be any element, although typically you'll use an Image or <canvas>",
      "phrases": {
        "active": "Creating pattern"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D",
            "required": true
          },
          "element": {
            "title": "Element",
            "async": true,
            "type": "HTMLElement"
          },
          "repetition": {
            "title": "Repetition",
            "enum": [
              "repeat",
              "repeat-x",
              "repeat-y",
              "no-repeat"
            ]
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          },
          "out": {
            "title": "Object",
            "type": "object"
          }
        }
      },
      "fn": "on.input.element = function() {\n  output({\n    out: $.create($.context.createImageData($.element, $.repetition)),\n    context: $.get('context') \n  });\n};\n"
    },
    {
      "name": "drawImage",
      "ns": "canvas",
      "async": true,
      "title": "Draw Image",
      "description": "",
      "phrases": {
        "active": "Drawing image"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D",
            "required": true
          },
          "element": {
            "title": "Element",
            "type": "HTMLElement",
            "required": true
          },
          "in": {
            "title": "Dimensions",
            "async": true,
            "type": "object",
            "properties": {
              "dx": {
                "title": "Destination X",
                "type": "number",
                "description": "The X coordinate in the destination canvas at which to place the top-left corner of the source image."
              },
              "dy": {
                "title": "Destination Y",
                "type": "number",
                "description": "The Y coordinate in the destination canvas at which to place the top-left corner of the source image."
              },
              "dw": {
                "title": "Destination Width",
                "type": "number",
                "description": "The width to draw the image in the destination canvas. This allows scaling of the drawn image. If not specified, the image is not scaled in width when drawn.",
                "required": false
              },
              "dh": {
                "title": "Destination Height",
                "type": "number",
                "description": "The height to draw the image in the destination canvas. This allows scaling of the drawn image. If not specified, the image is not scaled in height when drawn.",
                "required": false
              },
              "sx": {
                "title": "Source X",
                "type": "number",
                "description": "The X coordinate of the top left corner of the sub-rectangle of the source image to draw into the destination context.",
                "required": false
              },
              "sy": {
                "title": "Source Y",
                "type": "number",
                "description": "The Y coordinate of the top left corner of the sub-rectangle of the source image to draw into the destination context.",
                "required": false
              },
              "sw": {
                "title": "Source Width",
                "type": "number",
                "description": "The width of the sub-rectangle of the source image to draw into the destination context. If not specified, the entire rectangle from the coordinates specified by sx and sy to the bottom-right corner of the image is used. If you specify a negative value, the image is flipped horizontally when drawn.",
                "required": false
              },
              "sh": {
                "title": "Source Height",
                "type": "number",
                "description": "The height of the sub-rectangle of the source image to draw into the destination context. If you specify a negative value, the image is flipped vertically when drawn.",
                "required": false
              }
            }
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          }
        }
      },
      "fn": "on.input.in = function() {\n  var args = [$.element];\n\n  if($.in.sx && $.in.sy && $.in.sw && $.in.sh) {\n    args.push($.in.sx);\n    args.push($.in.sy);\n    args.push($.in.sw);\n    args.push($.in.sh);\n  }\n\n  args.push($.in.dx || 0);\n  args.push($.in.dy || 0);\n\n  if($.in.dw) {\n    args.push($.in.dw);\n    if($.in.dh) {\n      args.push($.in.dh);\n    }\n  }\n\n  $.context.drawImage.apply($.context, args);\n  output({\n    context: $.get('context')\n  });\n\n};\n"
    },
    {
      "name": "fill",
      "ns": "canvas",
      "async": true,
      "title": "Fill",
      "description": "Fill Context",
      "phrases": {
        "active": "Filling context"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "async": true,
            "type": "CanvasRenderingContext2D",
            "required": true
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          }
        }
      },
      "fn": "on.input.context = function() {\n  $.context.fill();\n  output({ context: $.get('context') });\n};\n"
    },
    {
      "name": "getContext",
      "ns": "canvas",
      "async": true,
      "title": "Get Context",
      "description": "Get Canvas Context",
      "phrases": {
        "active": "Getting context"
      },
      "ports": {
        "input": {
          "canvas": {
            "title": "Canvas",
            "async": true,
            "type": "HTMLElement",
            "required": true
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          }
        }
      },
      "fn": "on.input.canvas = function() {\n  output({\n    context: $.create($.canvas.getContext('2d'))\n  });\n};\n"
    },
    {
      "name": "getLineDash",
      "ns": "canvas",
      "async": true,
      "title": "Get Line Dash",
      "description": "Get Line Dash",
      "phrases": {
        "active": "Getting line dash"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "async": true,
            "type": "CanvasRenderingContext2D",
            "required": true
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          },
          "out": {
            "title": "Segment",
            "type": "array"
          }
        }
      },
      "fn": "on.input.context = function() {\n  output({\n    out: $.create($.context.getLineDash()),\n    context: $.get('context')\n  });\n};\n"
    },
    {
      "name": "lineTo",
      "ns": "canvas",
      "async": true,
      "title": "Line To",
      "description": "Connects the last point in the subpath to the x, y coordinates with a straight line",
      "phrases": {
        "active": "Moving"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D",
            "required": true
          },
          "in": {
            "title": "Point",
            "async": true,
            "type": "object",
            "required": true,
            "properties": {
              "x": {
                "type": "number",
                "title": "X",
                "description": "The x axis of the coordinate for the end of the line"
              },
              "y": {
                "type": "number",
                "title": "Y",
                "description": "The y axis of the coordinate for the end of the line"
              }
            }
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          },
          "out": {
            "title": "Point",
            "type": "array"
          }
        }
      },
      "fn": "on.input.in = function() {\n  $.context.lineTo($.in.x, $.in.y);\n  output({\n    context: $.get('context'),\n    out: $.get('in')\n  });\n};\n"
    },
    {
      "name": "measureText",
      "ns": "canvas",
      "async": true,
      "title": "Measure Text",
      "description": "Measure Text",
      "phrases": {
        "active": "Measuring text"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D",
            "required": true
          },
          "text": {
            "title": "Text",
            "type": "string",
            "async": true,
            "required": true
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          },
          "metrics": {
            "title": "Text Metrics",
            "type": "nsIDOMTextMetrics"
          }
        }
      },
      "fn": "on.input.text= function() {\n  output({\n    metrics: $.create($.context.measureText($.text)),\n    context: $.get('context')\n  });\n};\n"
    },
    {
      "name": "moveTo",
      "ns": "canvas",
      "async": true,
      "title": "Move To",
      "description": "Moves the starting point of a new subpath to the (x, y) coordinates",
      "phrases": {
        "active": "Moving"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D",
            "required": true
          },
          "in": {
            "title": "Point",
            "async": true,
            "type": "object",
            "required": true,
            "properties": {
              "x": {
                "type": "number",
                "title": "X"
              },
              "y": {
                "type": "number",
                "title": "Y"
              }
            }
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          },
          "out": {
            "title": "Point",
            "type": "array"
          }
        }
      },
      "fn": "on.input.in = function() {\n  $.context.moveTo($.in.x, $.in.y);\n  output({\n    context: $.get('context'),\n    out: $.get('in')\n  });\n};\n"
    },
    {
      "name": "resetClip",
      "ns": "canvas",
      "async": true,
      "title": "Reset Clip",
      "description": "Reset Clip",
      "phrases": {
        "active": "Resetting clip"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "async": true,
            "type": "CanvasRenderingContext2D",
            "required": true
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          }
        }
      },
      "fn": "on.input.context = function() {\n  $.context.resetClip();\n  output({ context: $.get('context') });\n};\n"
    },
    {
      "name": "resetTransform",
      "ns": "canvas",
      "async": true,
      "title": "Reset Transform",
      "description": "Reset Transform",
      "phrases": {
        "active": "Resetting clip"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "async": true,
            "type": "CanvasRenderingContext2D",
            "required": true
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          }
        }
      },
      "fn": "on.input.context = function() {\n  $.context.resetTransform();\n  output({ context: $.get('context') });\n};\n"
    },
    {
      "name": "restore",
      "ns": "canvas",
      "async": true,
      "title": "Restore",
      "description": "Restore Context",
      "phrases": {
        "active": "Restoring"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D",
            "required": true
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          }
        }
      },
      "fn": "on.input.context = function() {\n  $.context.restore();\n  output({\n    context: $.get('context')\n  });\n};\n"
    },
    {
      "name": "rotate",
      "ns": "canvas",
      "async": true,
      "title": "Rotate",
      "description": "Rotate Context",
      "phrases": {
        "active": "Rotating"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D",
            "required": true
          },
          "angle": {
            "title": "Angle",
            "async": true,
            "type": "number",
            "required": true
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          }
        }
      },
      "fn": "on.input.angle = function() {\n  $.context.rotate($.angle);\n  output({\n    context: $.get('context')\n  });\n};\n"
    },
    {
      "name": "save",
      "ns": "canvas",
      "async": true,
      "title": "Save",
      "description": "Save Context",
      "phrases": {
        "active": "Saving context"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "async": true,
            "type": "CanvasRenderingContext2D",
            "required": true
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          }
        }
      },
      "fn": "on.input.context = function() {\n  $.context.save();\n  output({ context: $.get('context') });\n};\n"
    },
    {
      "name": "scale",
      "ns": "canvas",
      "async": true,
      "title": "Scale",
      "description": "Scale",
      "phrases": {
        "active": "Scaling"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D",
            "required": true
          },
          "in": {
            "title": "Scaling factor x/y",
            "async": true,
            "type": "array",
            "required": true,
            "items": [
              {
                "type": "number",
                "title": "X"
              },
              {
                "type": "number",
                "title": "Y"
              }
            ],
            "minItems": 2,
            "maxItems": 2
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          }
        }
      },
      "fn": "on.input.in = function() {\n  $.context.scale($.in[0], $.in[1]);\n  output({ context: $.get('context') });\n};\n"
    },
    {
      "name": "setAttributes",
      "ns": "canvas",
      "async": true,
      "title": "Set Attributes",
      "description": "Sets one or more attributes",
      "phrases": {
        "active": "Setting attributes"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D",
            "required": true
          },
          "in": {
            "title": "Attributes",
            "type": "object",
            "async": true,
            "required": true,
            "properties": {
              "fillStyle": {
                "type": "string",
                "title": "Fill Style",
                "description": "Color or style to use inside shapes. Default #000 (black).",
                "format": "color",
                "default": "#000"
              },
              "font": {
                "type": "string",
                "title": "Font",
                "default": "10px sans-serif"
              },
              "globalAlpha": {
                "type": "number",
                "title": "Global Alpha",
                "description": "globalAlpha float Alpha value that is applied to shapes and images before they are composited onto the canvas. Default 1.0 (opaque).",
                "default": 1
              },
              "globalCompositeOperation": {
                "title": "Global Composite Operation",
                "description": "With globalAlpha applied this sets how shapes and images are drawn onto the existing bitmap.",
                "enum": [
                  "source-atop",
                  "source-in",
                  "source-out",
                  "source-over",
                  "destination-atop",
                  "destination-in",
                  "destination-out",
                  "destination-over",
                  "lighter",
                  "darker",
                  "copy",
                  "xor"
                ],
                "default": "source-over"
              },
              "lineCap": {
                "enum": [
                  "butt",
                  "round",
                  "square"
                ],
                "title": "Line Cap",
                "description": "Type of endings on the end of lines.",
                "default": "butt"
              },
              "lineDashOffset": {
                "type": "number",
                "title": "Line Dash Offset",
                "description": "Specifies where to start a dasharray on a line."
              },
              "lineJoin": {
                "enum": [
                  "miter",
                  "round",
                  "bevel"
                ],
                "title": "Line Join",
                "description": "Defines the type of corners where two lines meet.",
                "default": "miter"
              },
              "lineWidth": {
                "type": "number",
                "title": "Line Width",
                "description": "Width of lines",
                "default": 1
              },
              "miterLimit": {
                "type": "number",
                "title": "Miter Limit",
                "default": 10
              },
              "shadowBlur": {
                "type": "number",
                "title": "Shadow Blur",
                "description": "float Specifies the blurring effect.",
                "default": 0
              },
              "shadowColor": {
                "type": "string",
                "title": "Shadow Color",
                "description": "Color of the shadow. Default fully-transparent black.",
                "format": "color",
                "default": 0
              },
              "shadowOffsetX": {
                "type": "number",
                "title": "Shadow Offset X",
                "description": "Horizontal distance the shadow will be offset.",
                "default": 0
              },
              "shadowOffsetY": {
                "type": "number",
                "title": "Shadow Offset Y",
                "description": "Vertical distance the shadow will be offset.",
                "default": 0
              },
              "strokeStyle": {
                "type": "string",
                "title": "Stroke style",
                "description": "Color or style to use for the lines around shapes.",
                "format": "color",
                "default": "#000"
              },
              "textAlign": {
                "enum": [
                  "start",
                  "end",
                  "left",
                  "right",
                  "center"
                ],
                "title": "Text Align",
                "default": "start"
              },
              "textBaseline": {
                "enum": [
                  "top",
                  "hanging",
                  "middle",
                  "alphabetic",
                  "ideographic",
                  "bottom"
                ],
                "title": "Text Baseline",
                "default": "alphabetic"
              }
            }
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          }
        }
      },
      "fn": "on.input.in = function() {\n  for(var k in $.in) {\n    $.context[k] = $.in[k];\n  }\n  output({\n    context: $.get('context')\n  });\n};\n"
    },
    {
      "name": "setLineDash",
      "ns": "canvas",
      "async": true,
      "title": "Set Line Dash",
      "description": "Set Line Dash",
      "phrases": {
        "active": "Setting line dash"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D",
            "required": true
          },
          "segment": {
            "title": "Segment",
            "description": "An even number of non-negative numbers specifying a dash list.",
            "type": "array",
            "async": true,
            "required": true
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          }
        }
      },
      "fn": "on.input.segment = function() {\n  $.context.setLineDash($.segment);\n  output({\n    context: $.get('context')\n  });\n};\n"
    },
    {
      "name": "stroke",
      "ns": "canvas",
      "async": true,
      "title": "Stroke",
      "description": "Stroke",
      "phrases": {
        "active": "Stroking path"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "async": true,
            "type": "CanvasRenderingContext2D",
            "required": true
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          }
        }
      },
      "fn": "on.input.context = function() {\n  $.context.stroke();\n  output({ context: $.get('context') });\n};\n"
    },
    {
      "name": "strokeText",
      "ns": "canvas",
      "async": true,
      "title": "Stroke Text",
      "description": "Stroke Text",
      "phrases": {
        "active": "Stroking text"
      },
      "ports": {
        "input": {
          "text": {
            "title": "Text",
            "type": "string",
            "required": true
          },
          "x": {
            "title": "X",
            "type": "number",
            "required": true,
            "default": 0
          },
          "y": {
            "title": "Y",
            "type": "number",
            "required": true,
            "default": 0
          },
          "context": {
            "title": "Context",
            "async": true,
            "type": "CanvasRenderingContext2D",
            "required": true
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          }
        }
      },
      "fn": "on.input.context = function() {\n  $.context.strokeText($.text, $.x, $.y);\n  output({ context: $.get('context') });\n};\n"
    },
    {
      "name": "translate",
      "ns": "canvas",
      "async": true,
      "title": "Translate",
      "description": "Moves the origin point of the context to (x, y)",
      "phrases": {
        "active": "Translating context"
      },
      "ports": {
        "input": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D",
            "required": true
          },
          "in": {
            "title": "Point",
            "async": true,
            "type": "object",
            "required": true,
            "properties": {
              "x": {
                "type": "number",
                "title": "X"
              },
              "y": {
                "type": "number",
                "title": "Y"
              }
            }
          }
        },
        "output": {
          "context": {
            "title": "Context",
            "type": "CanvasRenderingContext2D"
          },
          "out": {
            "title": "Point",
            "type": "array"
          }
        }
      },
      "fn": "on.input.in = function() {\n  $.context.translate($.in.x, $.in.y);\n  output({\n    context: $.get('context'),\n    out: $.get('in')\n  });\n};\n"
    }
  ]
}